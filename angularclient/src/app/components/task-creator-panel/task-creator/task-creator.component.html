<div class="task-creator-container">
  <div class="task-creator-title">
    <h4>Stwórz zadanie - <strong>Zadanie 1</strong></h4>
  </div>
  <form #modalForm="ngForm">
    <div class="md-form mb-5">
      <i class="fas fa-file-signature prefix grey-text"></i>
      <input
        type="text"
        id="robotTaskname"
        class="form-control validate"
        required
        [(ngModel)]="robotTask.name"
        name="name"
      />
      <label
        for="robotTaskname"
        [class.active]="robotTask.name && robotTask.name.length > 0"
        >Nazwa zadania</label
      >
    </div>

    <p>Wybierz priorytet zadania</p>
    <div class="md-form">
      <select
        class="browser-default custom-select"
        (change)="selectTaskPriority($event.target.value)"
        [(ngModel)]="selectedTaskPriority"
        [ngModelOptions]="{ standalone: true }"
      >
        <option [value]="item.id" *ngFor="let item of taskPriorities">{{
          item.name
        }}</option>
      </select>
    </div>

    <p>Dodaj sekwencje zachowań</p>
    <div class="behaviour-container">
      <div
        cdkDropList
        #todoList="cdkDropList"
        [cdkDropListData]="behaviours"
        [cdkDropListConnectedTo]="[doneList]"
        class="behaviour-list"
        (cdkDropListDropped)="drop($event)"
      >
        <h2>Dostępne zachowania</h2>

        <div class="behaviour-box" *ngFor="let behaviour of behaviours; let i = index" cdkDrag>
          <div>
            <app-task-behaviour
              index="{{ i + 1 }}"
              title="{{ behaviour.name }}"
            ></app-task-behaviour>
          </div>
        </div>
      </div>

      <div
        cdkDropList
        #doneList="cdkDropList"
        [cdkDropListData]="behavioursComplete"
        [cdkDropListConnectedTo]="[todoList]"
        class="behaviour-list"
        (cdkDropListDropped)="drop($event)"
      >
        <h2>Stwórz sekwencje zachowań</h2>

        <div
          class="behaviour-box"
          *ngFor="let behaviour of behavioursComplete; let i = index"
          cdkDrag
        >
          <div>
            <app-task-behaviour
              index="{{ i + 1 }}"
              title="{{ behaviour.name }}"
            ></app-task-behaviour>
          </div>
        </div>
      </div>
    </div>

    <button class="btn btn-primary mb-3" [routerLink]="['/task-creator-panel']">
      <i class="fas fa-plus"></i> Anuluj
    </button>
    <button class="btn btn-secondary mb-3" (click)="createOrUpdate()">
      <i class="fas fa-plus"></i> Zapisz
    </button>
  </form>
</div>
